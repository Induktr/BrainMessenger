# Техническая документация

### 1. Общая информация

BrainMessenger — современный мессенджер для безопасного и удобного общения с поддержкой масштабирования до миллионов пользователей.

### 2. Технологический стек

- **Frontend:** Инструменты для разработки клиентского приложения (React Native, Next.js).
- **Backend:** Серверная логика и API (Node.js, NestJS).
- **База данных:** Хранение данных (PostgreSQL через Neon) и кэширование (Redis).
- **Хранилище файлов:** Хранение медиафайлов и резервных копий (Cloudflare R2).
- **Уведомления:** Push-уведомления (Firebase).
- **Очереди:** Асинхронная обработка задач (Kafka).
- **Тестирование, развертывание, мониторинг:** Средства автоматизации и контроля.

### 3. Архитектура проекта

- **Клиентское приложение:** Веб-интерфейс для пользователей.
- **Серверная часть:** Обработка бизнес-логики и API.
- **База данных:** Хранение информации о пользователях и чатах (Neon PostgreSQL).
- **Хранилище файлов:** Хранение медиафайлов и резервных копий (Cloudflare R2).
- **Кэширование:** Ускорение доступа к данным (Redis).
- **Уведомления:** Отправка push-сообщений (Firebase).
- **Очереди:** Асинхронная обработка задач (Kafka).
- **Платежи:** Управление транзакциями (Stripe, Cryptomus).
- **Взаимодействие:** Клиент → API → База данных/Очереди/Хранилище файлов.

### 4. API

- **Аутентификация:**
  - `registerUser` — регистрация пользователя.
  - `loginUser` — авторизация пользователя.
  - `logoutUser` — выход из системы.
- **Пользователь:**
  - `getUser(id: ID!)` — получение данных пользователя.
  - `updateUser(id: ID!, data: UserInput)` — обновление профиля.
  - `deleteUser(id: ID!)` — удаление аккаунта.
- **Чаты:**
  - `getChats` — список чатов.
  - `createChat(data: ChatInput)` — создание чата.
  - `getMessages(chatId: ID!)` — получение сообщений.
  - `sendMessage(chatId: ID!, content: String!)` — отправка сообщения.

### 5. База данных

- **users:** `id`, `email`, `password` — данные пользователей.
- **chats:** `id`, `userId` — информация о чатах.
- **messages:** `id`, `chatId`, `content` — сообщения.
- **transactions:** `id`, `userId`, `amount` — платежи.

### 6. Структура проекта

- **frontend:** Клиентское приложение.
- **backend:** Серверная логика.
- **database:** Скрипты базы данных.
- **services:** Уведомления, очереди, кэширование.
- **infrastructure:** Конфигурации развертывания.
- **docs:** Документация.

### 7. Безопасность

- Шифрование данных при передаче (TLS/SSL).
- Аутентификация через JWT и OAuth.
- Защита от DDoS через балансировку нагрузки.

### 8. Развертывание

- Контейнеризация и оркестрация с автоматизацией инфраструктуры.

### 9. Мониторинг и логирование

- Отслеживание производительности и ошибок.
- Сбор и анализ логов.

### 10. Внешние API интеграции

- **Gmail API:**
  - Отправка кодов подтверждения через email.
  - Поддержка двухфакторной аутентификации.