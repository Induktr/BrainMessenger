# Руководство по тестированию BrainMessenger

### 1. Общая информация

**Название проекта:** BrainMessenger

**Описание:** Руководство описывает процесс тестирования мессенджера BrainMessenger для проверки функциональности, производительности, безопасности и удобства использования.

**Цель:** Гарантировать, что приложение соответствует требованиям (см. Документацию требований), работает стабильно и безопасно для пользователей.

**Ответственные:** Команда QA (тестировщики), разработчики для поддержки автотестов.

---

### 2. Стратегия тестирования

- **Подход:** Комбинация ручного и автоматизированного тестирования.
- **Этапы:**
    1. Модульное тестирование (unit tests) — проверка отдельных компонентов.
    2. Интеграционное тестирование — проверка взаимодействия модулей.
    3. Системное тестирование — проверка всей системы в сборе.
    4. Нагрузочное тестирование — оценка производительности под нагрузкой.
    5. Тестирование безопасности — выявление уязвимостей.
    6. Регрессионное тестирование — проверка после исправлений.

---

### 3. Типы тестов и инструменты

| Тип теста | Инструменты | Описание |
| --- | --- | --- |
| Модульное | Jest | Тестирование отдельных функций и компонентов. |
| Интеграционное | Cypress, Postman | Проверка взаимодействия API и сервисов. |
| Системное | Playwright | Тестирование UI и функциональности. |
| Нагрузочное | JMeter, k6 | Оценка работы под высокой нагрузкой. |
| Безопасность | OWASP ZAP, Burp Suite | Проверка на уязвимости (XSS, SQL-инъекции). |
| Регрессионное | Cypress, Playwright | Повторная проверка ключевых функций. |

---

### 4. Тестовые сценарии

### 4.1. Регистрация и аутентификация

- **TC-1:** Регистрация с корректными данными
    - Шаги: Ввести email, пароль (8+ символов, цифра, спецсимвол), имя → Подтвердить код.
    - Ожидаемый результат: Пользователь зарегистрирован, токен выдан.
- **TC-2:** Регистрация с некорректным email
    - Шаги: Ввести "invalid-email" → Подтвердить.
    - Ожидаемый результат: Ошибка 400 "Некорректный формат email".
- **TC-3:** Вход с неверным паролем
    - Шаги: Ввести корректный email и неверный пароль.
    - Ожидаемый результат: Ошибка 401 "Неверный пароль".
- **TC-4:** Включение 2FA
    - Шаги: Войти → Включить 2FA → Получить код на email.
    - Ожидаемый результат: 2FA активирована, код отправлен.

### 4.2. Управление профилем

- **TC-5:** Обновление имени
    - Шаги: Войти → Изменить имя на "New Name".
    - Ожидаемый результат: Имя обновлено в профиле.
- **TC-6:** Удаление аккаунта
    - Шаги: Войти → Удалить аккаунт → Подтвердить.
    - Ожидаемый результат: Аккаунт удалён, вход невозможен.

### 4.3. Чаты и сообщения

- **TC-7:** Создание группового чата
    - Шаги: Войти → Создать чат → Добавить 2 пользователей.
    - Ожидаемый результат: Чат создан, участники видят его.
- **TC-8:** Отправка сообщения
    - Шаги: Открыть чат → Отправить "Hello".
    - Ожидаемый результат: Сообщение отображается в чате <1 сек.
- **TC-9:** Архивирование чата
    - Шаги: Выбрать чат → Архивировать.
    - Ожидаемый результат: Чат перемещён в архив.

### 4.4. Звонки и видеозвонки

- **TC-10:** Инициирование видеозвонка
    - Шаги: Выбрать контакт → Начать видеозвонок.
    - Ожидаемый результат: Звонок начат, видео и аудио работают.
- **TC-11:** Проверка истории звонков
    - Шаги: Совершить звонок → Открыть историю.
    - Ожидаемый результат: Звонок отображается с датой и временем.

### 4.5. Файлы и медиа

- **TC-12:** Отправка фото
    - Шаги: Открыть чат → Прикрепить фото (5 МБ).
    - Ожидаемый результат: Фото отправлено и отображается.
- **TC-13:** Фильтрация медиа
    - Шаги: Открыть медиа → Фильтр "Документы".
    - Ожидаемый результат: Показаны только документы.

### 4.6. Настройки

- **TC-14:** Смена темы
    - Шаги: Открыть настройки → Выбрать "Тёмная".
    - Ожидаемый результат: Интерфейс обновлён до тёмной темы.
- **TC-15:** Отключение анимаций
    - Шаги: Открыть настройки → Отключить анимации.
    - Ожидаемый результат: Анимации отсутствуют.

### 4.7. Премиум-подписка

- **TC-16:** Оформление подписки
    - Шаги: Перейти в Premium → Оформить подписку.
    - Ожидаемый результат: Подписка активирована, платёж записан.

### 4.8. Нагрузочное тестирование

- **TC-17:** 1000 одновременных пользователей
    - Шаги: Смоделировать 1000 пользователей, отправляющих сообщения.
    - Ожидаемый результат: Задержка <1 сек, ошибок <1%.

### 4.9. Тестирование безопасности

- **TC-18:** Попытка SQL-инъекции
    - Шаги: Ввести `' OR 1=1 --` в поле пароля.
    - Ожидаемый результат: Ошибка 400, доступ не получен.
- **TC-19:** Превышение попыток ввода кода
    - Шаги: Ввести неверный код 5 раз.
    - Ожидаемый результат: Блокировка на 60 сек.

---

### 5. Критерии успешности

- **Функциональность:** 100% тестовых сценариев (TC-1–TC-16) пройдены успешно.
- **Производительность:**
    - Время загрузки <0.5 сек (NFR-1).
    - Поиск чатов <0.3 сек (NFR-2).
    - Доставка сообщений <1 сек (NFR-3).
- **Нагрузка:** Система выдерживает 1000 одновременных пользователей с <1% ошибок (TC-17).
- **Безопасность:** Все уязвимости устранены, тесты TC-18 и TC-19 пройдены (NFR-7, NFR-8).
- **Надёжность:** Uptime 99.9% при тестировании в течение 24 часов (NFR-12).

---

### 6. План тестирования

| Этап | Срок | Ответственный | Инструменты |
| --- | --- | --- | --- |
| Модульное | 1 неделя | Разработчики | Jest |
| Интеграционное | 1 неделя | QA | Cypress, Postman |
| Системное | 2 недели | QA | Playwright |
| Нагрузочное | 1 неделя | QA, DevOps | JMeter, k6 |
| Безопасность | 1 неделя | QA, Security | OWASP ZAP, Burp |
| Регрессионное | После каждого исправления | QA | Cypress, Playwright |

---

### 7. Ресурсы

- **Команда:** 2 тестировщика, 1 специалист по безопасности, поддержка от разработчиков.
- **Тестовая среда:**
    - Локальная: Docker Compose с PostgreSQL и Redis.
    - Staging: Kubernetes-кластер, аналогичный продакшену.
- **Тестовые данные:** Генерация 1000 пользователей через скрипты.

---

### 8. Обработка дефектов

- **Критические баги:** Исправляются немедленно (например, сбой системы).
- **Средние баги:** Исправляются в течение 48 часов (например, ошибка UI).
- **Низкий приоритет:** Планируются на следующий цикл (например, косметические дефекты).
- **Инструмент:** Jira или аналог для трекинга.

---

### 9. Примечания

- Тестирование проводится на устройствах iOS 13+, Android 9+ и браузерах Chrome, Firefox, Safari (C-1).
- Минимальная скорость интернета для звонков — 1 Мбит/с (C-2).
- После каждого этапа составляется отчёт с процентом покрытия и выявленными дефектами.